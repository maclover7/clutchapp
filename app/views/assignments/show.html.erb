<p id="notice"><%= notice %></p>

<% if @assignment.work_allowed? %>
  <p>
    <button type="button" class="btn btn-default">
      <%= link_to "Submit for this assignment!", new_submission_path(:assignment_id => @assignment.id) %>
    </button>
  </p>
  <br />
<% end %>
<p>
  <strong>Name:</strong>
  <%= @assignment.name %>
</p>

<div>
  <p>
    <strong>Prompt:</strong>
  </p>
  <%= raw @assignment.prompt %>
</div>
<br>
<p>
  <strong>Work Allowed:</strong>
  <%= @assignment.work_allowed %>
</p>

<% if current_user.id == @assignment.user_id %>

  <%= link_to 'Edit', edit_assignment_path(@assignment) %> |
  <%= link_to 'Back', assignments_path %>

  <h1>Listing submissions</h1>

  <table class="table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Word count</th>
        <th>Submitted</th>
        <th>Student Name</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @submissions.each do |submission| %>
        <tr>
          <td><%= submission.title %></td>
          <td><%= submission.body.scan(/[\w-]+/).size %></td>
          <td><%= submission.submitted %></td>
          <td><% if submission.user_id? %><%= submission.user.name %><% end %></td>
          <td><%= link_to 'Show', submission %></td>
          <td><%= link_to 'Edit', edit_submission_path(submission) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
